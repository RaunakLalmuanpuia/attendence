import{Q as C}from"./QChip-D021voJ6.js";import{y as N,z as B,A as F,r as O,T as P,o as b,c as Q,w as l,g as s,a as t,i as m,h as x,u as c,bP as I,q as z,e as L,f as U,F as $,R as h,t as p}from"./app-B6ljmE4m.js";import{a as j,Q as S}from"./QStepper-D-mRy-aB.js";import{Q as A}from"./QSelect-Jg-3Vnic.js";import{Q as R}from"./QForm-BUpyPIkE.js";import{_ as T,a as V,b as v,c as g,Q as Y}from"./MainLayout-Dp50SWY5.js";import{Q as D}from"./QLayout-CQJIOMGO.js";import{u as E}from"./use-quasar-DJymb8OE.js";import"./use-panel-CS1LnnUP.js";import"./selection-CBxV_n-G.js";import"./use-cache-hsIl6Ivw.js";import"./rtl-DFPa-2ov.js";import"./FooterComponent-BOyJhOv3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const w=N({name:"QStepperNavigation",setup(f,{slots:u}){return()=>B("div",{class:"q-stepper__nav"},F(u.default))}}),G=s("div",{class:"flex justify-between"},[s("div",null,[s("div",{class:"text-title"},"Change Office")])],-1),H=s("br",null,null,-1),J={class:"row q-col-gutter-sm"},K={class:"col-xs-12 col-sm-7"},M={class:"text-grey-7"},W=s("div",{class:"flex q-gutter-sm"},null,-1),X={class:"col-xs-12 col-sm-5"},Z={class:"q-pa-md bg-white"},ee=s("div",{class:"text-lg text-dark"},"Previous Offices",-1),_e=Object.assign({layout:T},{__name:"PostingRequests",props:["offices","office","postings"],setup(f){const u=f,y=E(),o=O({step:1,options:u.offices||[]}),r=P({office:null,agree:!1}),k=(_,a)=>{var e;if(_){const n=(e=u.offices)==null?void 0:e.filter(i=>i.label.includes(_));a(n?()=>{o.options=n}:()=>{o.options=u.offices})}else a(()=>{o.options=u.offices})},q=_=>{r.transform(a=>({office_id:a.office.value})).post(route("posting.store"),{preserveState:!1,onStart:a=>y.loading.show(),onFinish:a=>y.loading.hide(),onSuccess:a=>o.step=1})};return(_,a)=>(b(),Q(D,{padding:"",class:"container"},{default:l(()=>[G,H,s("div",J,[s("div",K,[t(R,{onSubmit:q},{default:l(()=>[t(j,{flat:"",modelValue:o.step,"onUpdate:modelValue":a[4]||(a[4]=e=>o.step=e),vertical:"",color:"primary",animated:""},{default:l(()=>[t(S,{name:1,title:"Your Current Office",icon:"settings",done:o.step>1},{default:l(()=>{var e;return[s("p",M,[m(" Name of the office "),t(C,{square:"",label:(e=f.office)==null?void 0:e.name},null,8,["label"])]),t(w,null,{default:l(()=>[t(x,{onClick:a[0]||(a[0]=n=>o.step=2),color:"primary",label:"Next"})]),_:1})]}),_:1},8,["done"]),t(S,{name:2,title:"Your New Office",icon:"building",done:o.step>2},{default:l(()=>{var e,n,i;return[t(A,{modelValue:c(r).office,"onUpdate:modelValue":a[1]||(a[1]=d=>c(r).office=d),"use-input":"",clearable:"","input-debounce":"500",onFilter:k,options:o.options,outlined:"",rules:[d=>!!d||"Please select your new office"],label:"Select your new office"},null,8,["modelValue","options","rules"]),c(r).office?(b(),Q(I,{key:0,class:"text-grey-7",modelValue:c(r).agree,"onUpdate:modelValue":a[2]||(a[2]=d=>c(r).agree=d),label:"I agree that my current office: "+((e=f.office)==null?void 0:e.name)+" will be changed to : "+((i=(n=c(r))==null?void 0:n.office)==null?void 0:i.label)+" based on approval"},null,8,["modelValue","label"])):z("",!0),W,t(w,{class:"flex q-gutter-sm q-mt-md"},{default:l(()=>[t(x,{type:"submit",disable:!c(r).agree,label:"Submit",color:"primary"},null,8,["disable"]),t(x,{onClick:a[3]||(a[3]=d=>o.step=1),label:"Back",color:"negative"})]),_:1})]}),_:1},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),s("div",X,[s("div",Z,[ee,t(Y,null,{default:l(()=>[(b(!0),L($,null,U(f.postings,(e,n)=>(b(),Q(V,{key:n},{default:l(()=>[t(v,{avatar:""},{default:l(()=>[t(h,{size:"md",color:"secondary","text-color":"white"},{default:l(()=>{var i;return[m(p((i=e==null?void 0:e.office)==null?void 0:i.name[0]),1)]}),_:2},1024)]),_:2},1024),t(v,null,{default:l(()=>[t(g,null,{default:l(()=>{var i;return[m(p((i=e==null?void 0:e.office)==null?void 0:i.name),1)]}),_:2},1024),t(g,{caption:""},{default:l(()=>[m(p(e==null?void 0:e.status),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,null,{default:l(()=>[t(v,{avatar:""},{default:l(()=>[t(h,{size:"md",color:"primary","text-color":"white"},{default:l(()=>{var e;return[m(p((e=f.office)==null?void 0:e.name[0]),1)]}),_:1})]),_:1}),t(v,null,{default:l(()=>[t(g,null,{default:l(()=>{var e;return[m(p((e=f.office)==null?void 0:e.name),1)]}),_:1})]),_:1})]),_:1})]),_:1})])])])]),_:1}))}});export{_e as default};
