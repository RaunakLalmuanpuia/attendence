import{r as K,T as W,o as c,c as g,w as u,g as a,h as f,a as l,k as X,Q as _,u as s,e as Z,f as ee,F as oe,O as h,d as L,i as Y,t as j,l as te}from"./app-B6ljmE4m.js";import{Q as z}from"./QSelect-Jg-3Vnic.js";import{_ as se,Q as le,a as ae,b as w,c as M}from"./MainLayout-Dp50SWY5.js";import{Q as re}from"./QForm-BUpyPIkE.js";import{Q as ie}from"./QLayout-CQJIOMGO.js";import{u as ne}from"./use-quasar-DJymb8OE.js";import"./QChip-D021voJ6.js";import"./rtl-DFPa-2ov.js";import"./selection-CBxV_n-G.js";import"./FooterComponent-BOyJhOv3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"flex justify-between items-center"},ue=a("div",null,[a("div",{class:"text-title"},"Edit User")],-1),ce={class:"flex q-gutter-sm"},me={class:"col-xs-12 col-sm-7"},ge={class:"row q-col-gutter-sm q-pa-md bg-white"},fe=a("legend",{class:"q-pa-sm text-white bg-dark text-lg rounded-borders text-md"},"Account Information",-1),pe={class:"col-xs-12"},ve={class:"col-xs-12"},be={class:"col-xs-12"},_e={class:"col-xs-12"},he={class:"col-xs-12"},we={class:"col-xs-12"},ke={class:"col-xs-12"},ye={class:"flex q-gutter-sm"},Ve={class:"col-xs-12 col-sm-5"},xe={class:"bg-white q-pa-md"},Qe=a("legend",{class:"q-pa-sm text-white bg-dark text-lg rounded-borders text-md"},"Devices",-1),Te=Object.assign({layout:se},{__name:"Edit",props:["roles","offices","data","current_offices","role"],setup(p){var y,V,x,Q;const n=p,m=K({submitting:!1,toggle:"password"}),r=ne(),t=W({full_name:(y=n.data)==null?void 0:y.full_name,designation:(V=n.data)==null?void 0:V.designation,mobile:(x=n.data)==null?void 0:x.mobile,password:"",role:(Q=n==null?void 0:n.role)==null?void 0:Q.name,offices:n.current_offices}),P=d=>{r.dialog({title:"Confirmation",message:"Do you want to delete it?",ok:"Yes",cancel:"No"}).onOk(()=>{h.delete(route("user.destroy",n.data.id),{preserveState:!1,onStart:o=>r.loading.show({message:"Deleting..."}),onFinish:o=>r.loading.hide()})})},R=d=>{r.loading.show(),axios.put(route("device.toggle",d.id)).then(o=>{const{message:i}=o.data;r.notify({message:i,type:"positive"})}).finally(()=>r.loading.hide())},G=d=>{r.dialog({title:"Confirmation",message:"Do you want to Deactivate it?",ok:"Yes",cancel:"No"}).onOk(()=>{h.delete(route("user.deactivate",n.data.id),{preserveState:!1,onStart:o=>r.loading.show({message:"Deactivating..."}),onFinish:o=>r.loading.hide()})})},H=d=>{r.dialog({title:"Confirmation",message:"Do you want to activate this account?",ok:"Yes",cancel:!0}).onOk(()=>{h.put(route("user.activate",d.id),{},{preserveState:!1})})},k=d=>m.toggle=m.toggle==="password"?"text":"password",J=d=>{var o;t.transform(i=>{var v;return{office_ids:(v=i==null?void 0:i.offices)==null?void 0:v.map(b=>b.value),...i}}).put(route("user.update",(o=n.data)==null?void 0:o.id),{onStart:i=>r.loading.show({message:"Updating..."}),onFinish:i=>r.loading.hide()})};return(d,o)=>(c(),g(ie,{class:"container",padding:""},{default:u(()=>{var i;return[a("div",de,[ue,a("div",ce,[(i=p.data)!=null&&i.deleted_at?(c(),g(f,{key:0,loading:m.submitting,onClick:o[0]||(o[0]=v=>H(p.data)),color:"positive",outline:"",label:"Activate"},null,8,["loading"])):(c(),g(f,{key:1,loading:m.submitting,onClick:G,color:"negative",outline:"",label:"Deactivate"},null,8,["loading"])),l(f,{loading:m.submitting,onClick:P,color:"negative",label:"Delete"},null,8,["loading"])])]),l(X,{class:"q-my-md"}),l(re,{class:"row q-col-gutter-sm",onSubmit:J},{default:u(()=>{var v,b,S,D,q,C,U,O,F,N,I,B,$,T,A;return[a("div",me,[a("fieldset",ge,[fe,a("div",pe,[l(_,{modelValue:s(t).full_name,"onUpdate:modelValue":o[1]||(o[1]=e=>s(t).full_name=e),error:!!((v=s(t).errors)!=null&&v.full_name),"error-message":(S=(b=s(t).errors)==null?void 0:b.full_name)==null?void 0:S.toString(),rules:[e=>!!e||"Full Name is required"],"bg-color":"white",label:"Name","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),a("div",ve,[l(_,{modelValue:s(t).designation,"onUpdate:modelValue":o[2]||(o[2]=e=>s(t).designation=e),"bg-color":"white",label:"Designation","no-error-icon":"",outlined:"",rules:[e=>!0]},null,8,["modelValue"])]),a("div",be,[l(_,{modelValue:s(t).mobile,"onUpdate:modelValue":o[3]||(o[3]=e=>s(t).mobile=e),error:!!((D=s(t).errors)!=null&&D.mobile),"error-message":(C=(q=s(t).errors)==null?void 0:q.mobile)==null?void 0:C.toString(),rules:[e=>!!e||"Mobile is required"],mask:"##########","bg-color":"white",label:"Mobile","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","rules"])]),a("div",_e,[l(z,{modelValue:s(t).role,"onUpdate:modelValue":o[4]||(o[4]=e=>s(t).role=e),clearable:"",error:!!((U=s(t).errors)!=null&&U.role),"error-message":(F=(O=s(t).errors)==null?void 0:O.role)==null?void 0:F.toString(),options:p.roles,"bg-color":"white",label:"Role","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options"])]),a("div",he,[l(z,{modelValue:s(t).offices,"onUpdate:modelValue":o[5]||(o[5]=e=>s(t).offices=e),error:!!((N=s(t).errors)!=null&&N.office_id),"error-message":(B=(I=s(t).errors)==null?void 0:I.office_id)==null?void 0:B.toString(),options:p.offices,rules:[e=>!!e||"Office is required"],multiple:"","bg-color":"white",label:"Office","use-chips":"","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options","rules"])]),a("div",we,[l(_,{modelValue:s(t).password,"onUpdate:modelValue":o[6]||(o[6]=e=>s(t).password=e),type:m.toggle,error:!!(($=s(t).errors)!=null&&$.password),"error-message":(A=(T=s(t).errors)==null?void 0:T.password)==null?void 0:A.toString(),"bg-color":"white",label:"Password","no-error-icon":"",outlined:""},{append:u(()=>[m.toggle==="password"?(c(),g(f,{key:0,onClick:k,flat:"",round:"",icon:"o_visibility_off"})):(c(),g(f,{key:1,onClick:k,flat:"",round:"",icon:"o_visibility"}))]),_:1},8,["modelValue","type","error","error-message"])]),a("div",ke,[a("div",ye,[l(f,{loading:m.submitting,class:"sized-btn",color:"primary",label:"Save",type:"submit"},null,8,["loading"]),l(f,{class:"sized-btn",color:"negative",label:"Cancel",outline:"",onClick:o[7]||(o[7]=e=>d.$inertia.replace(d.route("user.active")))})])])])]),a("div",Ve,[a("fieldset",xe,[Qe,l(le,{separator:""},{default:u(()=>[(c(!0),Z(oe,null,ee(p.data.devices,e=>(c(),g(ae,{key:e.id},{default:u(()=>[l(w,{avatar:""},{default:u(()=>[e.active?(c(),g(L,{key:0,color:"positive",name:"fiber_manual_record"})):(c(),g(L,{key:1,color:"grey-4",name:"fiber_manual_record"}))]),_:2},1024),l(w,null,{default:u(()=>[l(M,null,{default:u(()=>[Y(j(e==null?void 0:e.name),1)]),_:2},1024),l(M,null,{default:u(()=>[Y(j(e==null?void 0:e.code),1)]),_:2},1024)]),_:2},1024),l(w,{side:""},{default:u(()=>[l(te,{"onUpdate:modelValue":[E=>R(e),E=>e.active=E],modelValue:e.active,class:"text-white"},null,8,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]}),_:1})]}),_:1}))}});export{Te as default};
